"use strict";class inAppNotification{constructor(t){this.notificationOptions={time:5e3,type:"bottom-right",title:"",description:"",interactions:null,attachment:null,thumbnail:null,header:"",footer:"",controls:"visible",onclick:null,contextmenu:null,appendTo:document.body,sound:null,menus:null},this.active=!1,this.notificationBody=document.createElement("div"),this.notificationContents={header:document.createElement("div"),title:document.createElement("div"),description:document.createElement("div"),attachment:document.createElement("img"),interactions:document.createElement("div"),controls:document.createElement("div"),controlsBtn:{menu:document.createElementNS("http://www.w3.org/2000/svg","svg"),x:document.createElementNS("http://www.w3.org/2000/svg","svg")},footer:document.createElement("div"),menuList:document.createElement("div")};try{for(const i in t)t[i]&&(this.notificationOptions[i]=t[i]);this.create()}catch(t){console.error(t)}}create(){try{if(this.setTextContents(),this.setControls(),this.notificationOptions.thumbnail&&this.setThumbnail(),this.notificationOptions.attachment&&this.setAttachment(),this.notificationOptions.interactions){if(this.notificationOptions.interactions.buttons)for(const t in this.notificationOptions.interactions.buttons)this.createInteractionsButton(this.notificationOptions.interactions.buttons[t]);this.notificationOptions.interactions.form&&this.createInterationsInput(this.notificationOptions.interactions.form)}this.setMenuOptions(),this.addClass(),this.notificationBody.addEventListener("click",t=>{t.stopPropagation(),"function"==typeof this.notificationOptions.onclick&&this.notificationOptions.onclick()}),this.notificationContents.controlsBtn.x.addEventListener("click",()=>this.animate("hide")),this.notificationContents.controlsBtn.menu.addEventListener("click",()=>this.showNotificatonMenu()),this.notificationContents.controls.append(this.notificationContents.controlsBtn.menu,this.notificationContents.controlsBtn.x),this.notificationBody.append(this.notificationContents.controls,this.notificationContents.header,this.notificationContents.title,this.notificationContents.description),this.notificationOptions.attachment&&this.notificationBody.append(this.notificationContents.attachment),this.notificationBody.append(this.notificationContents.interactions,this.notificationContents.footer,this.notificationContents.menuList),this.notificationOptions.appendTo.append(this.notificationBody),this.animate("show")}catch(t){console.error(t)}}setTextContents(){this.notificationContents.header.textContent=this.notificationOptions.header,this.notificationContents.title.textContent=this.notificationOptions.title,this.notificationContents.description.textContent=this.notificationOptions.description,this.notificationContents.footer.textContent=this.notificationOptions.footer}setControls(){switch(this.notificationContents.controlsBtn.menu.innerHTML='<path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" />',this.notificationContents.controlsBtn.x.innerHTML='<path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />',this.notificationContents.controlsBtn.x.setAttribute("width","16"),this.notificationContents.controlsBtn.x.setAttribute("height","16"),this.notificationContents.controlsBtn.x.setAttribute("fill","currentColor"),this.notificationContents.controlsBtn.x.setAttribute("viewBox","0 0 16 16"),this.notificationContents.controlsBtn.menu.setAttribute("width","16"),this.notificationContents.controlsBtn.menu.setAttribute("height","16"),this.notificationContents.controlsBtn.menu.setAttribute("fill","currentColor"),this.notificationContents.controlsBtn.menu.setAttribute("viewBox","0 0 16 16"),this.notificationOptions.controls){case"hidden":this.notificationContents.controls.style.display="none";break;case"menu":this.notificationContents.controlsBtn.x.style.display="none";break;case"x":this.notificationContents.controlsBtn.menu.style.display="none"}}setThumbnail(){var t;let i=document.createElement("img");i.src=this.notificationOptions.thumbnail.src,i.alt=null!==(t=this.notificationOptions.thumbnail.alt)&&void 0!==t?t:"",i.draggable=!1,i.classList.add("in-app-notification-header-thumbnail"),this.notificationContents.header.insertAdjacentElement("afterbegin",i)}setAttachment(){var t;this.notificationContents.attachment.src=this.notificationOptions.attachment.src,this.notificationContents.attachment.alt=null!==(t=this.notificationOptions.attachment.alt)&&void 0!==t?t:"",this.notificationContents.attachment.draggable=!1}setMenuOptions(){const t=document.createElement("div");t.classList.add("in-app-notification-menu-title");const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width","24"),i.setAttribute("height","24"),i.setAttribute("fill","currentColor"),i.setAttribute("viewBox","0 0 16 16"),i.classList.add("in-app-notification-menu-content"),i.innerHTML='<path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z" />',i.addEventListener("click",t=>{this.blur(),t.stopPropagation(),this.notificationContents.menuList.classList.remove("show")});const n=document.createElement("b");if(n.textContent="Notification Options",t.append(i,n),this.notificationContents.menuList.append(t),this.notificationOptions.menus)for(const t of this.notificationOptions.menus){const i=document.createElement("div");i.classList.add("in-app-notification-menu-content"),i.textContent=t.text,i.addEventListener("click",i=>{i.stopPropagation(),t.onclick()}),this.notificationContents.menuList.append(i)}}createInteractionsButton(t){const i=document.createElement("button");i.textContent=t.text,i.addEventListener("click",i=>{i.stopPropagation(),t.onclick(),t.clickToHide&&this.animate("hide")}),this.notificationContents.interactions.append(i)}createInterationsInput(t){var i;const n=document.createElement("form"),o=document.createElement("input");o.type="text",o.placeholder=null!==(i=t.placeholder)&&void 0!==i?i:"",o.addEventListener("focus",()=>this.focus()),o.addEventListener("blur",()=>this.blur()),n.onsubmit=(()=>{const i=o.value;return t.onsubmit(i),t.submitToHide&&this.animate("hide"),!1});const e=document.createElement("button");e.type="submit";const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("width","16"),s.setAttribute("height","16"),s.setAttribute("fill","currentColor"),s.setAttribute("viewBox","0 0 16 16"),s.innerHTML='<path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z" />',e.append(s),n.append(o,e),this.notificationContents.interactions.append(n)}focus(){this.active=!0}blur(){this.active=!1,setTimeout(()=>{this.animate("hide")},this.notificationOptions.time)}addClass(){this.notificationBody.classList.add("in-app-notification",`in-app-notification-${this.notificationOptions.type}`),this.notificationContents.title.classList.add("in-app-notification-title"),this.notificationContents.header.classList.add("in-app-notification-header"),this.notificationContents.description.classList.add("in-app-notification-description"),this.notificationContents.attachment.classList.add("in-app-notification-attachment"),this.notificationContents.footer.classList.add("in-app-notification-footer"),this.notificationContents.controls.classList.add("in-app-notification-controls"),this.notificationContents.interactions.classList.add("in-app-notification-interactions"),this.notificationContents.menuList.classList.add("in-app-notification-menu")}showNotificatonMenu(){this.focus(),this.notificationContents.menuList.classList.add("show")}animate(t){this.active||("show"==t?(this.notificationOptions.sound&&this.playSound(),setTimeout(()=>this.notificationBody.classList.add("showed"),0),setTimeout(()=>{this.animate("hide")},this.notificationOptions.time)):"hide"==t&&(this.notificationBody.classList.remove("showed"),setTimeout(()=>{this.remove()},this.getMillisecondsFromCssDuration(this.notificationBody.style.transitionDuration))))}playSound(){var t;if("string"==typeof this.notificationOptions.sound){const t=new Audio(this.notificationOptions.sound);t.play()}else"object"==typeof this.notificationOptions.sound&&(null===(t=this.notificationOptions.sound)||void 0===t||t.play())}remove(){this.notificationBody.remove()}getMillisecondsFromCssDuration(t){return/.*ms/.test(t)?Number(t.slice(0,-2)):/.*s/.test(t)?1e3*Number(t.slice(0,-1)):2e3}}